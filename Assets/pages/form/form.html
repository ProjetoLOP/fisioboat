<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fisioboat- Formulário de Avaliação</title>
    <link rel="stylesheet" href="/Assets/pages/form/form.css">
</head>

<body>
    <div class="floating-particles" id="particles"></div>

    <header class="header">
        <a href="/">
            <div class="logo">FISIOBOAT</div>
        </a>
        <a href="/">
            <button class="back-btn">← Voltar</button>
        </a>
    </header>

    <div class="main-content">
        <div class="form-container">
            <h1 class="form-title">Formulário de Avaliação</h1>

            <form id="evaluationForm">
                <!-- Dados Pessoais -->
                <div class="form-section">
                    <h2 class="section-title">Dados Pessoais</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome" class="form-label required">Nome Completo</label>
                            <input type="text" id="nome" name="nome" class="form-input" placeholder="Seu nome completo"
                                required>
                            <div class="error-message">Por favor, insira seu nome completo</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email" class="form-label required">Email</label>
                            <input type="email" id="email" name="email" class="form-input" placeholder="seu@email.com"
                                required>
                            <div class="error-message">Por favor, insira um email válido</div>
                        </div>

                        <div class="form-group">
                            <label for="telefone" class="form-label required">Telefone</label>
                            <input type="tel" id="telefone" name="telefone" class="form-input"
                                placeholder="(11) 99999-9999" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="idade" class="form-label required">Idade (anos)</label>
                            <input type="number" id="idade" name="idade" class="form-input" min="1" max="120" required>
                        </div>

                        <div class="form-group">
                            <label for="altura" class="form-label required">Altura (cm)</label>
                            <input type="number" id="altura" name="altura" class="form-input" min="50" max="250"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="peso" class="form-label required">Massa corporal (kg)</label>
                            <input type="number" id="peso" name="peso" class="form-input" min="20" max="300" step="0.1"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="imc" class="form-label required">IMC</label>
                            <input type="text" id="imc" name="imc" class="form-input calculated-field" readonly>
                        </div>
                    </div>
                </div>

                <!-- Hábitos de Vida -->
                <div class="form-section">
                    <h2 class="section-title">Hábitos de Vida</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Fuma tabaco?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="fuma" value="sim" required>
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="fuma" value="nao" required>
                                    Não
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Já fumou?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="ja_fumou" value="sim">
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="ja_fumou" value="nao">
                                    Não
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Bebe bebida alcoólica?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="bebe" value="sim">
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="bebe" value="nao">
                                    Não
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Já bebeu?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="ja_bebeu" value="sim">
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="ja_bebeu" value="nao">
                                    Não
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="medicamentos" class="form-label required">Toma algum tipo de medicamento? Se sim,
                            qual?</label>
                        <textarea id="medicamentos" name="medicamentos" class="form-input" rows="3"
                            placeholder="Descreva os medicamentos ou escreva 'Nenhum'" required></textarea>
                    </div>
                </div>

                <!-- Informações Socioeconômicas -->
                <div class="form-section">
                    <h2 class="section-title">Informações Socioeconômicas</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="escolaridade" class="form-label">Escolaridade</label>
                            <select id="escolaridade" name="escolaridade" class="form-select">
                                <option value="">Selecione...</option>
                                <option value="ensino_medio_incompleto">Ensino médio incompleto</option>
                                <option value="ensino_medio_completo">Ensino médio completo</option>
                                <option value="graduacao_incompleta">Graduação incompleta</option>
                                <option value="graduacao_completa">Graduação completa</option>
                                <option value="especializacao">Especialização</option>
                                <option value="mestrado">Mestrado</option>
                                <option value="doutorado">Doutorado</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="renda" class="form-label required">Renda familiar (salário mínimo)</label>
                            <select id="renda" name="renda" class="form-select" required>
                                <option value="">Selecione...</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="acima_4">Acima de 4</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Sintomas e Condições -->
                <div class="form-section">
                    <h2 class="section-title">Sintomas e Condições</h2>

                    <div class="form-group">
                        <label class="form-label required">Qual o motivo levou a buscar um médico/especialista?</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="motivos" value="perde_sem_perceber">
                                Perde urina sem perceber
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="motivos" value="perde_ao_fazer_forca">
                                Perde urina ao fazer força
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="motivos" value="perde_ao_torcir">
                                Perde urina ao torcir/expirar
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="motivos" value="perde_ao_agachar">
                                Perde urina ao agachar
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="motivos" value="perde_ao_levantar">
                                Perde urina ao se levantar
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Com que frequência você perde urina?</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="nunca" required>
                                Nunca
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="uma_vez_semana" required>
                                Uma vez por semana ou menos
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="duas_tres_semana" required>
                                Duas ou três vezes por semana
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="uma_vez_dia" required>
                                Uma vez ao dia
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="diversas_vezes_dia" required>
                                Diversas vezes ao dia
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="frequencia_urina" value="tempo_todo" required>
                                O tempo todo
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Quantidade de urina que você pensa que perde</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="quantidade_urina" value="0">
                                Nenhuma (0)
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="quantidade_urina" value="2">
                                Uma pequena quantidade (2)
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="quantidade_urina" value="4">
                                Uma moderada quantidade (4)
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="quantidade_urina" value="6">
                                Uma grande quantidade (6)
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Em geral quanto que perder urina interfere em sua vida
                            diária? (0 = não interfere, 10 = interfere muito)</label>
                        <div class="scale-container">
                            <div class="scale-item" data-value="0">0</div>
                            <div class="scale-item" data-value="1">1</div>
                            <div class="scale-item" data-value="2">2</div>
                            <div class="scale-item" data-value="3">3</div>
                            <div class="scale-item" data-value="4">4</div>
                            <div class="scale-item" data-value="5">5</div>
                            <div class="scale-item" data-value="6">6</div>
                            <div class="scale-item" data-value="7">7</div>
                            <div class="scale-item" data-value="8">8</div>
                            <div class="scale-item" data-value="9">9</div>
                            <div class="scale-item" data-value="10">10</div>
                        </div>
                        <input type="hidden" name="interferencia_vida" id="interferencia_vida" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Quando você perde urina? (Marque todas as alternativas que se
                            aplicam)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="antes_banheiro">
                                Perco antes de chegar ao banheiro
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="tusso_espiro">
                                Perco quando tusso ou espiro
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="dormindo">
                                Perco quando estou dormindo
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="atividade_fisica">
                                Perco quando estou fazendo atividades físicas
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="terminei_urinar">
                                Perco quando terminei de urinar e estou me vestindo
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="sem_razao">
                                Perco sem razão óbvia
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="quando_perde" value="tempo_todo">
                                Perco o tempo todo
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Equilíbrio e Quedas -->
                <div class="form-section">
                    <h2 class="section-title">Equilíbrio e Quedas</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Tem desequilíbrio postural?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="desequilibrio" value="sim">
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="desequilibrio" value="nao">
                                    Não
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Já chegou a cair?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="ja_caiu" value="sim">
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="ja_caiu" value="nao">
                                    Não
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="tempo_queda" class="form-label">Quanto tempo da última queda (meses)</label>
                        <input type="number" id="tempo_queda" name="tempo_queda" class="form-input" min="0">
                    </div>
                </div>

                <!-- Exercícios Físicos -->
                <div class="form-section">
                    <h2 class="section-title">Exercícios Físicos</h2>

                    <div class="form-group">
                        <label class="form-label">Pratica algum tipo de exercício físico?</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="pratica_exercicio" value="sim">
                                Sim
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="pratica_exercicio" value="nao">
                                Não
                            </label>
                        </div>
                    </div>

                    <div class="form-group" id="tipos-exercicio" style="display: none;">
                        <label class="form-label">Se sim, qual? (Múltipla escolha)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="musculacao">
                                Musculação
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="natacao">
                                Natação
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="corrida">
                                Corrida na rua
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="caminhada">
                                Caminhada
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="crossfit">
                                CrossFit
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="yoga">
                                Yoga
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="fisioterapia">
                                Fisioterapia convencional
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="ciclismo">
                                Ciclismo
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_exercicio" value="funcional">
                                Treinamento funcional
                            </label>
                        </div>
                    </div>

                    <div class="form-group" id="duracao-exercicio" style="display: none;">
                        <label for="duracao_treino" class="form-label">Quantos minutos de treino/sessão diária?</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="duracao_treino" value="30">
                                30 minutos
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="duracao_treino" value="45">
                                45 minutos
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="duracao_treino" value="60">
                                60 minutos
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="duracao_treino" value="acima_60">
                                Acima de 60 minutos
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Tratamento -->
                <div class="form-section">
                    <h2 class="section-title">Tratamento e Histórico Médico</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Está em algum tratamento ou reabilitação do assoalho
                                pélvico?</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="tratamento_assoalho" value="sim" required>
                                    Sim
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="tratamento_assoalho" value="nao" required>
                                    Não
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="tempo_diagnostico" class="form-label">Quanto tempo de diagnóstico do sintoma
                                (meses)</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="tempo_diagnostico" value="3">
                                    3 meses
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="tempo_diagnostico" value="6">
                                    6 meses
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="tempo_diagnostico" value="9">
                                    9 meses
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="tempo_diagnostico" value="12">
                                    12 meses
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="tempo_diagnostico" value="acima_12">
                                    Acima de 12 meses
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Doenças -->
                <div class="form-section">
                    <h2 class="section-title">Histórico de Saúde</h2>

                    <div class="form-group">
                        <label class="form-label required">Tem algum tipo de doença não transmissível?</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="tem_doenca" value="sim" required>
                                Sim
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="tem_doenca" value="nao" required>
                                Não
                            </label>
                        </div>
                    </div>

                    <div class="form-group" id="tipos-doenca" style="display: none;">
                        <label class="form-label">Se sim, qual? (Múltipla escolha)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="hipertensao">
                                Hipertensão
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="alzheimer">
                                Alzheimer
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="diabetes_tipo1">
                                Diabetes tipo 1
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="diabetes_tipo2">
                                Diabetes tipo 2
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="respiratorio">
                                Respiratório
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="metabolico">
                                Metabólico
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="hormonal">
                                Hormonal
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="ansiedade">
                                Ansiedade
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="depressao">
                                Depressão
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="tireoide">
                                Tireóide
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="tipos_doenca" value="outro">
                                Outro
                            </label>
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Enviar Formulário</button>
            </form>
        </div>
    </div>

    <script>
        // Função para salvar dados do formulário no localStorage
        function saveFormToLocalStorage(event) {
            event.preventDefault();

            // Gerar ID único para o usuário
            const userId = String(Math.floor(Math.random() * 1000000)).padStart(5, "0");

            // Coletar todos os dados do formulário
            const formData = new FormData(event.target);

            // Criar objeto com os dados pessoais
            const personalInfo = {
                // Dados Pessoais
                nome: formData.get('nome'),
                email: formData.get('email'),
                telefone: formData.get('telefone'),
                idade: formData.get('idade'),
                altura: formData.get('altura'),
                peso: formData.get('peso'),
                imc: formData.get('imc'),

                // Hábitos de Vida
                fuma: formData.get('fuma'),
                ja_fumou: formData.get('ja_fumou'),
                bebe: formData.get('bebe'),
                ja_bebeu: formData.get('ja_bebeu'),
                medicamentos: formData.get('medicamentos'),

                // Informações Socioeconômicas
                escolaridade: formData.get('escolaridade'),
                renda: formData.get('renda'),

                // Sintomas e Condições
                motivos: formData.getAll('motivos'), // Array com múltiplas seleções
                frequencia_urina: formData.get('frequencia_urina'),
                quantidade_urina: formData.get('quantidade_urina'),
                interferencia_vida: formData.get('interferencia_vida'),
                quando_perde: formData.getAll('quando_perde'), // Array com múltiplas seleções

                // Equilíbrio e Quedas
                desequilibrio: formData.get('desequilibrio'),
                ja_caiu: formData.get('ja_caiu'),
                tempo_queda: formData.get('tempo_queda'),

                // Exercícios Físicos
                pratica_exercicio: formData.get('pratica_exercicio'),
                tipos_exercicio: formData.getAll('tipos_exercicio'), // Array com múltiplas seleções
                duracao_treino: formData.get('duracao_treino'),

                // Tratamento
                tratamento_assoalho: formData.get('tratamento_assoalho'),
                tempo_diagnostico: formData.get('tempo_diagnostico'),

                // Doenças
                tem_doenca: formData.get('tem_doenca'),
                tipos_doenca: formData.getAll('tipos_doenca'), // Array com múltiplas seleções

                // Metadados
                data_preenchimento: new Date().toISOString(),
                timestamp: Date.now()
            };

            // Criar objeto do usuário
            const userData = {
                id: userId,
                nome: personalInfo.nome,
                personal_info: personalInfo,
                sessions: []
            };

            // Recuperar array de usuários existentes ou criar novo
            let users = [];
            try {
                const existingUsers = localStorage.getItem('users');
                if (existingUsers) {
                    users = JSON.parse(existingUsers);
                    // Garantir que seja um array
                    if (!Array.isArray(users)) {
                        users = [];
                    }
                }
            } catch (error) {
                console.error('Erro ao recuperar usuários existentes:', error);
                users = [];
            }

            // Adicionar novo usuário ao array
            users.push(userData);

            // Salvar no localStorage
            try {
                localStorage.setItem('users', JSON.stringify(users));

                // Log de sucesso
                console.log('Dados salvos com sucesso!');
                console.log('ID do usuário:', userId);
                console.log('Dados do usuário:', userData);

                // Feedback visual de sucesso
                const submitBtn = document.querySelector('.submit-btn');
                submitBtn.textContent = 'Dados Salvos com Sucesso!';
                submitBtn.style.backgroundColor = '#00b894';
                submitBtn.disabled = true;

                // Opcional: limpar o formulário após 2 segundos
                setTimeout(() => {
                    if (confirm('Dados salvos com sucesso! Deseja limpar o formulário?')) {
                        event.target.reset();
                        // Resetar o botão
                        submitBtn.textContent = 'Enviar Formulário';
                        submitBtn.style.backgroundColor = '';
                        submitBtn.disabled = false;
                        // Limpar campo IMC calculado
                        document.getElementById('imc').value = '';
                        // Limpar seleções da escala
                        document.querySelectorAll('.scale-item').forEach(item => {
                            item.classList.remove('selected');
                        });
                    } else {
                        submitBtn.textContent = 'Enviar Formulário';
                        submitBtn.style.backgroundColor = '';
                        submitBtn.disabled = false;
                    }
                }, 2000);

                return true;

            } catch (error) {
                console.error('Erro ao salvar no localStorage:', error);
                alert('Erro ao salvar os dados. Por favor, tente novamente.');
                return false;
            }
        }

        // Adicionar o event listener ao formulário
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('evaluationForm');
            if (form) {
                // Remover listeners anteriores de validação se existirem
                const newForm = form.cloneNode(true);
                form.parentNode.replaceChild(newForm, form);

                // Adicionar novo listener
                newForm.addEventListener('submit', saveFormToLocalStorage);
            }

            const scaleItems = document.querySelectorAll('.scale-item');
            scaleItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Remover seleção anterior
                    scaleItems.forEach(i => i.classList.remove('selected'));
                    // Adicionar seleção atual
                    item.classList.add('selected');
                    // Atualizar o campo oculto
                    document.getElementById('interferencia_vida').value = item.getAttribute('data-value');
                });
            });
        });

        // Função auxiliar para recuperar todos os usuários
        function getAllUsers() {
            try {
                const users = localStorage.getItem('users');
                return users ? JSON.parse(users) : [];
            } catch (error) {
                console.error('Erro ao recuperar usuários:', error);
                return [];
            }
        }

        // Função auxiliar para buscar usuário por ID
        function getUserById(userId) {
            const users = getAllUsers();
            return users.find(user => user.id === userId);
        }

        // Função auxiliar para limpar todos os usuários (use com cuidado!)
        function clearAllUsers() {
            if (confirm('Tem certeza que deseja limpar todos os dados de usuários?')) {
                localStorage.removeItem('users');
                console.log('Todos os dados de usuários foram removidos.');
            }
        }

        // Função auxiliar para exportar dados como JSON
        function exportUsersData() {
            const users = getAllUsers();
            const dataStr = JSON.stringify(users, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);

            const exportFileDefaultName = 'users_data_' + new Date().toISOString().slice(0, 10) + '.json';

            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Expor funções úteis no objeto window para acesso via console
        window.formStorage = {
            getAllUsers,
            getUserById,
            clearAllUsers,
            exportUsersData
        };
    </script>
</body>

</html>